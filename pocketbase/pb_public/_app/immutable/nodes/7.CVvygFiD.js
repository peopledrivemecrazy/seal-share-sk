import{g as U}from"../chunks/Dw5N5MVz.js";import{p as _}from"../chunks/BT_lkVjL.js";import{c as I}from"../chunks/Dnf-jpWp.js";import{u as O}from"../chunks/BiAbzXGt.js";import{r as B}from"../chunks/B90CZVMX.js";import{t as F,a as m,b as w}from"../chunks/BFXbanDE.js";import{p as M,g as y,a as R,c as o,s as f,n as v,r as i,e as T,d as q,b as D}from"../chunks/BbX6vshq.js";import{r as E}from"../chunks/B-eyZhdV.js";import{c as L}from"../chunks/aD5usxsZ.js";import{p as W}from"../chunks/zlAFByCr.js";import{B as k}from"../chunks/B5sa7d2P.js";const Y=async()=>{const a=await O();if(a)B(301,"/");else{const{privateKey:r,publicKey:t}=await z();return{hasKeys:a,privateKey:r,publicKey:t}}},z=async()=>{var c;const a=(c=_.authStore.record)==null?void 0:c.email;if(!a)throw"No User";const{privateKey:r,publicKey:t}=await U(a,"replaceMeWithUserInput");if(!await I(t))throw"Failed to create key store";return{privateKey:r,publicKey:t}},ae=Object.freeze(Object.defineProperty({__proto__:null,load:Y},Symbol.toStringTag,{value:"Module"}));var A=F(`<div class="flex min-h-screen flex-col items-center justify-center bg-background p-4"><div class="w-full max-w-md"><h1 class="mb-7 scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Your Encryption Keys Are Ready!</h1> <p class="mb-2 text-lg bg-slate-800 p-4 rounded-lg">We've generated a unique key pair for you. Your public key will be used to encrypt files, and
			your private key is required to decrypt them. For security reasons, we don't store your
			private keyâ€”make sure to download and keep it safe.</p> <div class="py-4"><!></div> <p class="text-sm font-medium">If you lose your private key, you won't be able to access encrypted files.</p> <div class="space-y-4 pt-8"><label class="flex cursor-pointer items-center justify-center space-x-2"><input type="checkbox" class="checkbox"> <span class="text-sm font-medium">I Understand & Saved My Private Key</span></label> <!></div></div></div>`);function re(a,r){M(r,!0);let t=D(!1),b=W(r.data.privateKey);const c=(e,d)=>{const s=new Blob([e],{type:"text/plain"}),P=URL.createObjectURL(s),j=new Date().toISOString(),u=document.createElement("a");u.href=P,u.download=`${d}_key_${j}.txt`,u.click()};var l=A(),x=o(l),n=f(o(x),4),K=o(n);k(K,{class:"w-full",onclick:()=>{var e;c(b,(e=_.authStore.record)==null?void 0:e.email)},children:(e,d)=>{v();var s=w("Download Private Key File");m(e,s)},$$slots:{default:!0}}),i(n);var g=f(n,4),p=o(g),h=o(p);E(h),v(2),i(p);var $=f(p,2);const S=T(()=>!y(t));k($,{class:"btn w-full",get disabled(){return y(S)},onclick:()=>{window.location.href="/"},children:(e,d)=>{v();var s=w("Proceed");m(e,s)},$$slots:{default:!0}}),i(g),i(x),i(l),L(h,()=>y(t),e=>q(t,e)),m(a,l),R()}export{re as component,ae as universal};
